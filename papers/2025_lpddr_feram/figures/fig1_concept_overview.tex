% figures/fig1_concept_overview.tex
\begin{figure}[t]
  \centering
  \resizebox{\columnwidth}{!}{% ← 追加：はみ出し防止
  \begin{tikzpicture}[node distance=1.5cm, font=\small, >=stealth]
    % Mobile Edge AI Device
    \node[draw, thick, rounded corners, fill=gray!15,
          minimum width=8cm, minimum height=5cm] (device) {};

    % SoC block
    \node[draw, thick, fill=blue!10, minimum width=3.5cm, minimum height=1.2cm]
      (soc) at (device.center) {SoC / AI Accelerator};

    % LPDDR
    \node[draw, thick, fill=cyan!20, minimum width=3.0cm, minimum height=1.0cm,
          above=1.2cm of soc] (lpddr) {LPDDR (main memory)};

    % FeRAM
    \node[draw, thick, fill=green!20, minimum width=2.8cm, minimum height=1.0cm,
          right=2.5cm of soc] (feram) {FeRAM Chiplet};

    % SystemDK supervision
    \node[draw, thick, dashed, red!60!black, rounded corners,
          fit=(soc) (lpddr) (feram), inner sep=6pt] (sysdk) {};
    \node[anchor=north west, font=\small\itshape, red!60!black]
      at ([xshift=2pt,yshift=-2pt]sysdk.north west) {SystemDK Co-Design Supervision};

    % Arrows
    \draw[->, thick] (soc.north) -- (lpddr.south) node[midway,left] {high BW};
    \draw[->, thick] (soc.east) -- (feram.west) node[midway,above] {checkpoint / state};
    \draw[<->, thick, dashed] (lpddr.east) -- (feram.north west) node[midway,below] {refresh offload};
  \end{tikzpicture}}
  \vspace{-1ex}
  \caption{High-level concept of LPDDR+FeRAM integration for mobile edge AI.}
  \label{fig:concept_lpddr_feram}
\end{figure}
