\section{System Architecture}
\subsection{Cross-Node Chipset}
The humanoid system-on-chipset integrates heterogeneous technologies:
\begin{itemize}
  \item \textbf{Brain SoC (22 nm)}: executes LLM inference, FSM management, and LQR/LQG control;
  \item \textbf{Sensor Hub (0.18 µm AMS)}: processes CMOS cameras, IMU, encoders, force/pressure sensors, and microphones;
  \item \textbf{Power Drive (0.35 µm LDMOS + external GaN/MOSFET)}: enables high-torque actuation with current and temperature monitoring;
  \item \textbf{Energy Harvesting Subsystem}: piezoelectric, photovoltaic, and regenerative sources for extended autonomy;
  \item \textbf{Memory Subsystem}: LPDDR for active tasks and FRAM/EEPROM for checkpoints and logs.
\end{itemize}

\subsection{Hierarchical Control Layers}
\begin{itemize}
  \item \textbf{LLM Layer}: goal generation, anomaly interpretation, conversational interface;
  \item \textbf{FSM Layer}: mode switching between standing, walking, turning, recovery, and energy-saving behaviors;
  \item \textbf{Physical Control Layer}: PID and state-space control for joint-level stability and full-body coordination;
  \item \textbf{Drive Layer}: high-torque actuation and safety monitoring;
  \item \textbf{Energy Layer}: harvesting, storage, and power management.
\end{itemize}

\subsection{SystemDK Integrated Design Flow}
As illustrated in Fig.~\ref{fig:systemdk_flow}, the proposed PoC was modeled 
and verified using SystemDK. The design flow captures cross-node interactions 
between digital SoC, AMS front-end, power drive, and energy harvesting subsystems, 
enabling multi-physics co-simulation of noise, heat, and stress effects.

\begin{figure}[t]
  \centering
  % まず .tikz を探して読み込み；無ければ .pdf；どちらも無ければプレースホルダ
  \IfFileExists{figures/systemdk_flow.tikz}{%
    \input{figures/systemdk_flow.tikz}%
  }{%
    \IfFileExists{figures/systemdk_flow.pdf}{%
      \includegraphics[width=\columnwidth]{figures/systemdk_flow.pdf}%
    }{%
      \fbox{\begin{minipage}[c][0.48\linewidth][c]{0.94\columnwidth}\centering
      \vspace{0.5em}\textit{Placeholder: \path{figures/systemdk_flow.{tikz|pdf}} not found}\\
      (Commit the figure to replace this box.)\vspace{0.5em}
      \end{minipage}}%
    }%
  }
  \caption{SystemDK-based integrated design flow spanning SoC (22 nm), AMS (0.18~µm),
    LDMOS power drive (0.35~µm), and energy harvesting subsystems.}
  \label{fig:systemdk_flow}
\end{figure}

\subsection{Key Performance Indicators}
The PoC architecture was evaluated against several key performance indicators (KPIs),
summarized in Table~\ref{tab:kpi_summary}. These metrics guided the design trade-offs
in posture recovery, gait stability, energy efficiency, and memory subsystem performance.

\begin{table}[t]
\caption{Summary of Key Performance Indicators (KPIs)}
\label{tab:kpi_summary}
\centering
\renewcommand{\arraystretch}{1.15}
\footnotesize
\begin{tabular}{@{}p{0.48\columnwidth} p{0.44\columnwidth}@{}}
\toprule
\textbf{Metric} & \textbf{Result} \\
\midrule
Posture recovery time & $\leq 200$ ms (vs.\ $>500$ ms with PID only) \\
Gait stability (CoM RMS) & $\approx 30\%$ improvement over PID only \\
Energy efficiency & $+15\%$ with hybrid control + harvesting \\
Self-harvest contribution & Up to $20\%$ of power budget \\
Checkpoint resume time & $\leq 10$ ms (FRAM/EEPROM) \\
Memory endurance & $10^{12}$ write cycles \\
\bottomrule
\end{tabular}
\end{table}
