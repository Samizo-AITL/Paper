\section{System Architecture}

\subsection{Cross-Node Chipset}
The humanoid control system is implemented as a heterogeneous cross-node chipset integrating:
\begin{itemize}
  \item \textbf{Brain SoC (22 nm)}: executes LLM inference, FSM management, and LQR/LQG control;
  \item \textbf{Sensor Hub (0.18 µm AMS)}: acquires multimodal data from cameras, IMU, encoders, force/pressure sensors, and microphones;
  \item \textbf{Power Drive (0.35 µm LDMOS with external GaN/MOSFET)}: delivers high-torque actuation with current and temperature monitoring;
  \item \textbf{Energy Harvesting Subsystem}: incorporates piezoelectric, photovoltaic, and regenerative sources for extended autonomy;
  \item \textbf{Memory Subsystem}: employs LPDDR for active tasks and FRAM/EEPROM for checkpointing and persistent logging.
\end{itemize}

\subsection{AITL Three-Layer Control Architecture}
The control hierarchy follows the \textbf{AITL (AI-Integrated Three-Layer)} paradigm, 
where classical feedback and supervisory logic are augmented with AI-based reasoning:
\begin{itemize}
  \item \textbf{Inner Loop (PID Control)}: guarantees joint-level stability, disturbance rejection, and real-time responsiveness;
  \item \textbf{Middle Loop (FSM Control)}: orchestrates sequential behaviors such as standing, walking, turning, recovery, and energy-saving modes by supervising PID controllers;
  \item \textbf{Outer Loop (LLM Supervision)}: interprets anomalies, generates high-level goals, and, when necessary, reconfigures the control system itself by retuning PID gains or revising FSM transition rules.
\end{itemize}
This layered design ensures stability through PID, structured sequencing via FSM, 
and adaptability through LLM-driven supervision, establishing a hybrid paradigm that 
bridges model-based control and AI-driven reasoning.

\begin{figure}[t]
  \centering
  \resizebox{\columnwidth}{!}{\input{figures/aitl_architecture.tikz}}
  \caption{AITL three-layer control hierarchy. PID ensures stability, FSM orchestrates mode transitions, and LLM supervises anomalies and reconfiguration.}
  \label{fig:aitl_layers}
\end{figure}

\subsection{SystemDK Co-Design Flow}
As illustrated in Fig.~\ref{fig:systemdk_flow}, the proof-of-concept was modeled and verified
using SystemDK. The co-design flow captures cross-node interactions among the digital SoC,
AMS sensor hub, power drive, and energy harvesting modules, enabling multi-physics
co-simulation including noise, thermal, and mechanical stress effects.

\begin{figure}[t]
  \centering
  % 1) Use PDF if available
  \IfFileExists{figures/systemdk_flow.pdf}{%
    \includegraphics[width=\linewidth,keepaspectratio]{figures/systemdk_flow.pdf}%
  }{%
  % 2) Fallback to TikZ
  \IfFileExists{figures/systemdk_flow.tikz}{%
    \resizebox{\linewidth}{!}{\input{figures/systemdk_flow.tikz}}%
  }{%
  % 3) Placeholder if missing
    \fbox{\begin{minipage}[c][0.44\linewidth][c]{0.94\linewidth}\centering
      \vspace{0.3em}\textit{Placeholder: \path{figures/systemdk_flow.(pdf|tikz)} not found}\\
      (Commit the figure to replace this box.)\vspace{0.3em}
    \end{minipage}}%
  }}%
  \caption{SystemDK-based integrated design flow spanning SoC (22 nm), AMS (0.18 µm),
  LDMOS power drive (0.35 µm), and energy harvesting subsystems.}
  \label{fig:systemdk_flow}
\end{figure}

\subsection{Key Performance Indicators}
The architecture was evaluated against several key performance indicators (KPIs),
summarized in Table~\ref{tab:kpi_summary}. These metrics guided design trade-offs
in stabilization, efficiency, and resilience.

\begin{table}[t]
\caption{Summary of Key Performance Indicators (KPIs)}
\label{tab:kpi_summary}
\centering
\renewcommand{\arraystretch}{1.15}
\footnotesize
\begin{tabular}{@{}p{0.48\columnwidth} p{0.44\columnwidth}@{}}
\toprule
\textbf{Metric} & \textbf{Result} \\
\midrule
Posture recovery time & $\leq 200$ ms (baseline PID-only: $>500$ ms) \\
Gait stability (CoM RMS) & $\approx 30\%$ improvement over PID-only \\
Energy efficiency & $+15\%$ with hybrid control and harvesting \\
Self-harvested power & Up to $20\%$ of system power budget \\
Checkpoint resume time & $\leq 10$ ms (FRAM/EEPROM-based) \\
Memory endurance & $10^{12}$ write cycles (FRAM) \\
\bottomrule
\end{tabular}
\end{table}
