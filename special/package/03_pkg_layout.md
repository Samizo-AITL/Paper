# 🧩 パッケージ構造とレイアウト設計の基本

---

## 📝 はじめに

先進パッケージングでは、**電気特性・熱特性・機械特性をすべて満たす構造設計とレイアウト設計**が求められます。特に2.5D/3D構造、インターポーザ、RDL、マルチチップ実装などの高度化により、**パッケージは単なる外装ではなく、能動的な設計対象**になっています。

---

## 🧱 パッケージの構造分類

| 構造タイプ | 特徴 | 用途 |
|------------|------|------|
| **リードフレーム** | 単純構造・安価・量産性高 | 小規模LSI、汎用IC |
| **BGA/QFN/COF** | 高密度・小型・実装性良好 | コンシューマ製品 |
| **Siインターポーザ（2.5D）** | 微細配線・高接続密度 | HBM/高速I/F用途 |
| **RDLファンアウト（e.g. FOWLP）** | ウェハレベル再配線 | スマホ・SoC |
| **3D積層（TSV）** | 高性能・小型・高熱密度 | AIチップ・ロジック＋メモリ構成 |

---

## 🧰 レイアウト設計の要素

- **信号インテグリティ（SI）**  
  - 伝送線長、インピーダンス整合、反射・クロストークの抑制
- **パワーデリバリネットワーク（PDN）**  
  - 電源層のインピーダンス最小化、デカップリング配置
- **熱設計との整合**  
  - 発熱源近傍の銅配分・GND層構造
- **応力・反り管理**  
  - 対称配置、材料厚の調整、低CTE材の活用

---

## 📊 配線・層構成の例（FC-BGA）

```
Layer Stackup（下から上）

┌──────────────┐
│ シールド層 / GND         │
│ Power mesh                │ ← PDN強化
│ Signal routing (L3)       │
│ Signal routing (L2)       │
│ Signal routing (L1)       │
│ Bump layer / μBGA         │
└──────────────┘
```

- **GND-PWRサンドイッチ**構造でSI/PIを安定化
- 高速ラインはGND対向のストリップライン配置推奨

---

## 🎛️ レイアウト設計のチェックポイント

| 項目 | 推奨設計指針 |
|------|--------------|
| 信号線幅 | インピーダンス整合（e.g. 50Ω）に合わせ調整 |
| 層間接続 | ビア最小化 or ビアスタブ除去 |
| 配線距離 | クロストーク回避のための空間確保 |
| デカップ配置 | 電源ピン直近、複数容量の並列配置 |

---

## 🛰️ インターポーザ設計の注意点

- **配線密度と加工限界**：シリコン基板上のRDLは最小 1μm以下まで可能
- **TSV配置**：熱・応力集中回避のため、電源系と制御信号は配置分離
- **熱逃し設計**：中央部にヒートパスを集中配置 or Cuスタブ導入

---

## 📐 CADツールと検証

| 工程 | ツール例 |
|------|----------|
| 配線・層設計 | Cadence Allegro, Mentor Xpedition |
| インピーダンス・SI解析 | Keysight ADS, Ansys SIwave |
| レイアウトEM解析 | Ansys HFSS, CST Studio |

---

## 📂 推奨構成ファイル（GitHub例）

```
package/
├── pkg_layout/
│   ├── layout_basics.md
│   ├── stackup_examples.png
│   ├── impedance_guidelines.xlsx
│   └── via_design_notes.pdf
```

---

## 🎓 演習課題

1. 高速メモリI/F（DDR4）のためのインターポーザ構造を設計し、クロストーク対策を図案化せよ。
2. ファンアウトパッケージにおけるRDLレイアウトの制約条件を整理し、各種層構成の差異を比較せよ。
3. PDNとGNDの層間配置を変えた場合のSI影響をSPICEまたはADSでシミュレーションせよ。

---

## 🔗 関連資料リンク

- EMI・SIとの関係 → [`emi_emc_basics.md`](./emi_emc_basics.md)
- 応力と材料構成の設計連携 → [`stress_simulation.md`](./stress_simulation.md)

---

## 🧭 参考資料

- JEITA「半導体パッケージ設計技術ガイドライン」
- IEEE 3D IC Conference 論文集
- TSMC InFO / Intel EMIB / Samsung eWLB 各種白書

---
