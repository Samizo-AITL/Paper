# 4.4：設計フロー（RTL → 論理合成 → 物理設計 → 検証 → マスク作成）

SoC設計は、製品仕様をもとにして回路を記述する**RTL設計**からスタートし、最終的には**GDSII形式のマスクデータ**としてファウンドリに引き渡されます。  
この一連の設計フローは各ステップが密接に関連しており、**上流の判断が下流工程に直接影響**します。

---

## ✅ RTL設計（Register Transfer Level）

設計の第一段階では、回路の機能を記述するために**HDL（Hardware Description Language）**を用いてRTLを設計します。  
代表的な言語：**Verilog, VHDL**

主な作業内容：

- 状態機械（FSM）、カウンタ、データパスなどの論理記述
- テストベンチによる機能検証（シミュレーション）
- 機能要件とクロック構造の整理

🔍 **RTL設計の品質は、その後の全工程に大きな影響を与えます。**

---

## ✅ 論理合成（Logic Synthesis）

RTLで記述された設計は、**論理合成ツール**で**ゲートレベルネットリスト**へと変換されます。

主な成果物：

- ネットリスト（回路接続情報）
- タイミング情報（SDFなど）
- 面積・消費電力のレポート

🎯 タイミング制約や電力制約に合致しているかを確認します。

---

## ✅ 物理設計（Physical Design）

ネットリストを基に、実際のチップ上に**配置・配線**を行います。

主な工程：

- 標準セル配置（Placement）
- クロックツリー合成（CTS）
- ルーティング（Routing）
- パッド・I/O配置
- 配線寄生成分の考慮（抵抗・容量）

💡 この段階で、**面積制約・電気的制約**を考慮した最適化が必要です。

---

## ✅ 設計検証（Verification）

物理設計後、製造可能かを判断するために**各種検証**を行います。

| 検証項目 | 内容 |
|----------|------|
| **DRC（Design Rule Check）** | プロセスルール違反の有無を確認 |
| **LVS（Layout vs. Schematic）** | 回路図とレイアウトの一致を確認 |
| **STA（Static Timing Analysis）** | クロック制約下で遅延・セットアップを確認 |

📌 **製造信頼性と論理正当性の保証が目的です。**

---

## ✅ マスクデータ作成（GDSII Export）

検証が完了したら、**GDSII形式**でマスクデータを出力します。  
これはファウンドリがフォトマスクを作成するための**最終成果物**です。

🎯 **GDSデータは「設計の完成形」**といえます。

---

## ✅ おわりに

SoC設計フローは：

```
RTL設計 → 論理合成 → 物理設計 → 検証 → マスク作成
```

という**一貫したステップ**で構成されます。  
各段階の**品質と検証**が、最終製品の**性能と信頼性**を大きく左右します。

🎓 教育現場では、この設計フローを**演習形式で一通り体験**することで、現場に近い「設計感覚」が身につきます。

---

📘 **次章では：**  
この設計成果がどのように**テスト・パッケージ化され、製品として市場に出るか**を学びます。
