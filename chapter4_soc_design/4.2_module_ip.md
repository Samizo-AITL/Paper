# 4.2：モジュール選定と抽象設計（IP設計の利点）

---

## ✅ 本節の目的

SoC設計では、製品仕様に基づいて必要な**機能ブロック（モジュール）**を構成していきます。  
本節では、設計初期の「モジュール選定」と「抽象設計」の考え方を学び、  
さらに**IP（Intellectual Property）**の活用による効率化についても解説します。

---

## ✅ 1. モジュールとは何か？

SoC内部を構成する**機能単位の論理ブロック**を「モジュール」と呼びます。

| 種類 | 例 |
|------|----|
| **CPUコア** | RISC-V, ARM Cortex-Mなど |
| **周辺回路（Peripheral）** | タイマー、PWM、ADC、UARTなど |
| **メモリブロック** | SRAM、ROM、Flashなど |
| **カスタムIP** | 独自アルゴリズム、アナログ制御など |

🔧 設計初期には「**どのモジュールをどう組み合わせるか**」が設計の骨格になります。

---

## ✅ 2. モジュール選定の流れ（実務＋教育向け）

| ステップ | 内容 | ツール例 |
|----------|------|----------|
| **① 機能整理** | 製品仕様から必要機能を洗い出す | 仕様書、会議資料 |
| **② ブロック分解** | 各機能を論理ブロックに落とし込む | ブロック図 |
| **③ 既存IPの有無確認** | 内製／外部IPを検索・評価 | PDK、IPライブラリ |
| **④ カスタムの要否判断** | 性能・機能要求に応じて自作か判断 | RTL設計、Verilog |
| **⑤ 抽象設計へ** | 各ブロックのI/O・面積・性能を定義 | Excel, SystemDK など |

📘 教育では、「仕様 → ブロック分解 → 抽象設計 → 実装」まで一連の流れを経験することが重要です。

---

## ✅ 3. IP設計の利点と留意点

### 🔹 利点（設計効率・再利用性）

| 項目 | 内容 |
|------|------|
| **設計の再利用性** | 一度設計したIPを他製品でも活用可能 |
| **検証済み** | 検証・量産実績のあるIPは信頼性が高い |
| **工数削減** | 開発期間短縮、役割分担が明確に |
| **外部購入可能** | 商用IP（USB, CPU, DDRなど）で高機能対応も可能 |

### 🔹 留意点（制約と整合性）

- **インタフェース整合性**（信号やクロックがSoC内で接続できるか）
- **ライセンス条件**（商用IPは契約／使用制限あり）
- **カスタマイズ性**（改変可能か？内部アクセス可否）
- **面積・電力の妥当性**（アナログIPは特に検証が必要）

---

## ✅ 4. 教育における抽象設計演習

| 教育内容 | 演習例 |
|----------|--------|
| **ブロック図作成** | 温度センサ＋PWM制御のSoCを構成図に展開 |
| **I/O定義** | 各ブロックの入出力信号をリストアップ |
| **インタフェース検討** | APB / AHBバスなど接続方式を検討 |
| **PDK連携** | 使用予定IPの電圧・面積条件を確認し、設計仕様に反映 |

🧠 *SystemDK的視点では、抽象設計 → RTL/PDK接続までを意識した教材化が有効です。*

---

## ✅ 5. モジュール選定とPDKの関係

- **PDK（Process Design Kit）**には、使用可能なIPやセルライブラリの情報が含まれます
- **メモリIP（SRAM）**や**I/Oセル、PLL、バスアービタ**などのスペックを把握しておくことが重要
- 選定したモジュールが**ターゲットプロセスでレイアウト可能か？**を設計初期に確認する必要があります

---

## ✅ まとめ

| ポイント | 内容 |
|----------|------|
| **モジュール選定は設計の骨格** | SoC構成の最初の意思決定ステップ |
| **IP設計は効率と品質の両立手段** | 教育でも“再利用・検証性”の視点が重要 |
| **抽象設計はPDKとRTLをつなぐハブ** | SoC設計全体を構造的に理解する鍵となる |

---

📎 次節では、「[PDKの役割と重要性](4.3_pdk_usage.md)」へと進みます。
