# 3.3：プロセス設計ルール詳細とDRC反映例（0.18μmプロセス）

本節では、0.18μmプロセスにおける代表的な設計ルール（Design Rule）と、それに基づいた**DRC（Design Rule Check）例**を解説します。  
PDKに含まれるルールブックやDRCエンジンとの関係を教育的に整理し、レイアウト設計とDFM（Design for Manufacturability）の橋渡しを行います。

---

## ✅ 1. 設計ルールとは

設計ルールとは、**トランジスタや配線が正しく製造されるための幾何的な制約**です。

### 🔹 主な種類

| ルール | 説明 |
|--------|------|
| 最小幅（min width） | 各レイヤの最小ライン幅 |
| 最小間隔（min spacing） | 配線やトランジスタ間の最小距離 |
| オーバーラップ | 接続層が下層を十分に覆う必要 |
| ENC（enclosure） | メタルがコンタクトやビアを囲む距離 |
| EOL（end of line） | 配線の終端処理ルール |

---

## ✅ 2. 代表的なレイヤと制約例（0.18μm）

| レイヤ | 最小幅 | 最小間隔 | 補足 |
|--------|--------|----------|------|
| Poly | 0.22μm | 0.24μm | LとW制限あり |
| N+/P+ Diffusion | 0.28μm | 0.28μm | Implant Maskも関与 |
| Metal1 | 0.30μm | 0.30μm | 配線制約が厳しい |
| Contact | 0.22μm | 0.24μm | ENC必要（Poly/Metal1） |
| Via1 | 0.24μm | 0.28μm | Metal1/2との重ね必須 |

📌 実際のPDKでは、ルールは約300〜500種類に及ぶことも。

---

## ✅ 3. DRC（Design Rule Check）とは

DRCは、レイアウトが全ての設計ルールを**自動的にチェックする工程**です。

### 🔹 DRCの出力例

- `DRC-1001: Metal1 width < 0.30μm`
- `DRC-2034: Via1 enclosure insufficient on Metal2`
- `DRC-3505: Minimum spacing between Poly gates not met`

🛠️ → 実際のDRCエラーをログとして保存し、レイアウト修正を繰り返す

---

## ✅ 4. 教育用図例（作成予定）

- ✅ DRC通過例：合格レイアウト断面
- ❌ DRC違反例：Poly幅不足、Via ENC不足、Metal間隔不足など
- 🧠 解説付きDRCログ解析

---

## ✅ 5. DRCと製造歩留まりの関係

- 設計ルール違反は、**製造不良や歩留まり低下**の原因に直結
- 特に「エッジスペース不足」や「過度な密集」は、プロセス変動に弱くなる
- **安全マージン設計（Rule + 10%）**が推奨されるケースもある

---

## ✅ 6. 実務例とPDK連携

- PDKには、設計ルール表、DRC deck（チェックルール記述）、SPICEモデルがセットで提供
- Cadence、Synopsys、OpenLaneなどでDRCが自動実行可能
- GitHub等にあるオープンPDK（例：sky130）と類似性あり

---

## ✅ まとめ

| キーワード | 意味 |
|------------|------|
| DRC | 設計ルール違反の自動チェック |
| ENC | オーバーラップ距離 |
| Spacing | 配線や構造物間の間隔 |
| Rule violation | 製造不良や信頼性低下のリスク |

設計ルールの遵守は、**設計者の基本的責任**であり、製品の信頼性と量産性を左右します。
