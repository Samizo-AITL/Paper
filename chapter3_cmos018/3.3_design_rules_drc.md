# 3.3：プロセス設計ルール詳細とDRC反映例（0.18μmプロセス）

---

## ✅ 本節の目的

本節では、0.18μmプロセスにおける代表的な**設計ルール（Design Rule）**と、それに基づく**DRC（Design Rule Check）**の基本と実例を解説します。  
PDKに含まれる設計ルール表・DRCデッキとの関係を学び、**レイアウト設計とDFM**（Design for Manufacturability）をつなぐ知識を身につけます。

---

## ✅ 1. 設計ルールとは？

設計ルールは、**LSIを正しく製造するための幾何的な制約**です。  
これにより、フォトリソ精度・エッチング限界・電気的絶縁性などを確保します。

🔹 **代表的な設計ルールの種類：**

| ルール名 | 説明 |
|----------|------|
| **最小幅（min width）** | 各レイヤのパターンが持つべき最小の幅 |
| **最小間隔（min spacing）** | 隣接パターン同士の最小距離 |
| **オーバーラップ（overlap）** | 上層が下層を十分に覆うこと（接続信頼性） |
| **ENC（enclosure）** | コンタクトやビアを囲う金属の距離 |
| **EOL（end of line）** | 配線終端の形状処理や空間要求 |

---

## ✅ 2. レイヤ別の設計制約例（0.18μmプロセス）

| レイヤ | 最小幅 | 最小間隔 | 補足 |
|--------|--------|----------|------|
| **Poly** | 0.22μm | 0.24μm | ゲート形成。長さ（L）・幅（W）制限あり |
| **N+/P+ Diffusion** | 0.28μm | 0.28μm | Implant層と重なる場合に制約あり |
| **Metal1** | 0.30μm | 0.30μm | 初段配線。電流密度制限が厳しい場合あり |
| **Contact** | 0.22μm | 0.24μm | ENC必須（Poly/Metal1との接続） |
| **Via1** | 0.24μm | 0.28μm | Metal1/2にまたがって配置。重ね必須 |

📌 実際のPDKには、**数百のルール**（300〜500項目程度）が定義されています。

---

## ✅ 3. DRC（Design Rule Check）とは？

**DRC（設計ルールチェック）**は、レイアウト設計が上記のルールを満たしているかを**自動で検出する工程**です。

🔹 **DRC出力の例：**

```
DRC-1001: Metal1 width < 0.30μm  → NG
DRC-2034: Via1 enclosure insufficient on Metal2  → NG
DRC-3505: Minimum spacing between Poly gates not met  → NG
```

🛠️ → 各エラーは**DRCログ**に保存され、修正・再チェックのループを実施します。

---

## ✅ 4. 教育用図例（作成予定）

- ✅ **DRC通過例**：正しく設計されたPolyゲート＋Metal配線のレイアウト断面
- ❌ **DRC違反例**：
  - Poly幅不足（min width違反）
  - Via ENC不足（オーバーラップ不備）
  - Metal間隔不足（隣接Metal同士のspacing違反）
- 🧠 **DRCログ解析**と修正プロセスの演習用教材に展開可能

---

## ✅ 5. DRCと製造歩留まりの関係

- 設計ルール違反は、**製造不良・ショート・開放**の原因に直結
- 特に「**エッジスペース不足**」「**密集パターン**」は、**露光・エッチングの変動に弱い**
- 実務では「**Rule + 10%の安全マージン**」設計が推奨されることもある

---

## ✅ 6. 実務例とPDK連携

- PDKには以下が含まれます：
  - 設計ルール表（PDFまたはExcel）
  - DRC Deck（ルールを記述したファイル、TCLなど）
  - SPICEモデル（回路シミュレーション用）

- 商用EDAツール（**Cadence, Synopsys**）や、オープンEDA環境（**OpenLane**）でDRCを実行可能

🔗 オープンPDKの代表例：**SkyWater sky130**  
（※ 130nm世代だが、0.18µmルールとの類似点多数）

---

## ✅ まとめ：設計ルールは設計品質の基盤

| キーワード | 説明 |
|------------|------|
| **DRC** | 設計ルールの自動検証ステップ |
| **ENC** | オーバーラップ距離のルール |
| **Spacing** | 構造物間の必要最小距離 |
| **Rule violation** | 製造不良や信頼性リスクに直結する |

📌 **設計ルールの理解と遵守は、設計者の基本的責任**であり、  
**製品の信頼性・歩留まり・コスト**に直結します。
