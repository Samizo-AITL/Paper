# 1.5 電圧波形と遅延の基礎  
〜論理回路が「時間」とともに動くことを理解する〜

## ⏱ なぜ「波形」や「遅延」が重要か？

論理回路は 0 と 1 で動いているように見えますが、実際には「電圧が徐々に変化する」物理現象です。  
そのため、入力が変化しても出力が瞬時に追従するとは限らず、**時間的な遅れ（伝搬遅延）**が発生します。

たとえば、CMOSインバータでは以下のような波形が観測されます。

```text
Vin:   ──────────────┐       ┌──────────────
                     └───────┘
Vout:  ─────┐                     ┌──────────
            └────────────────────┘
```

ここで出力Voutの反応が遅れている理由は、**MOSが持つ容量に対して充放電が必要になるから**です。

---

## 💡 遅延とは何か？（定義と意味）

出力信号が入力に反応して切り替わるまでの時間差を「伝搬遅延（Propagation Delay）」といいます。

- **t_pdHL**：VinがHighになってから、VoutがLowになるまでの時間
- **t_pdLH**：VinがLowになってから、VoutがHighになるまでの時間

この遅延は、次のゲートやクロックとのタイミングに大きな影響を与えます。

---

## ⚙️ RC遅延モデル（なぜ遅れるのか？）

遅延の主な原因は、MOSトランジスタ出力が「コンデンサ（負荷容量）」を充電・放電する動作にあると考えられます。

以下は、CMOSインバータの簡易RCモデルです：

```text
        VDD
         │
        ┌┴┐  ← PMOS or NMOS（ON時に導通）
        │ │
        └┬┘
         │─────→ Vout
         │
         ║ CL（負荷容量）
         │
        GND
```

このとき、出力遷移にかかる時間は **t ≈ R × C** に比例します。  
抵抗（R）はMOSのオン抵抗、容量（C）は配線やゲート入力の合計値です。

---

## 🧠 設計者の視点：どう制御する？

```text
✅ 高速化したいなら？
  → MOSを大きくしてRを小さく（W/L比↑）、CLを抑える工夫が必要です

✅ 遅延はどこで効く？
  → タイミング設計、セットアップ/ホールドタイム、クロック整合に直接影響します

✅ 測定や検証では？
  → SPICEシミュレーションやロジックシミュレータで波形を可視化し、最適設計へ
```

---

## 📌 実務例：0.18µm CMOSの場合

実際の設計では、例えば0.18µmプロセスで「1ゲートあたり数十ps〜数百ps」の遅延が出ます。  
これは数段の論理を通るだけでも数ns単位の遅延となり、**数百MHz〜GHz帯の動作において無視できない**値となります。

---

## 🔗 次に進む

これで「MOSを用いた論理回路」の基本が一通りそろいました。  
次節（1.6）では、この知識を整理し、SoC設計やLSI設計全体へどのように展開していくかをまとめます。
